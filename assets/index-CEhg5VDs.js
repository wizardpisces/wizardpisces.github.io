import{_ as p,B as m,C as v,o as T,c as b,a as u,b as d,l as S,m as C,t as f}from"./index-CN31fAmB.js";var c=function(){function r(){this.left=null,this.right=null,this.value=null}var n=r.prototype;return n.isLeaf=function(){return this.left===null&&this.right===null},n.encode=function(){return this.value?this.value:[this.left.encode(),this.right.encode()]},r}();function y(r,n){return r===void 0&&(r=""),n===void 0&&(n=8),"0".repeat(n-r.length)+r}var l=function(){function r(i){this.leafCache={},this.root=i||new c}var n=r.prototype;return n.stringToBitString=function(e){if(!e)return"";var t=e.split(""),o=parseInt(t.pop()),a="";return a=t.map(function(s){return y(s.charCodeAt(0).toString(2))}).join(""),a.substr(0,a.length-o)},n.bitStringToString=function(e){var t=8-e.length%8,o="";e=e+"0".repeat(t);for(var a=0;a<e.length;a+=8)o+=String.fromCharCode(parseInt(e.substr(a,8),2));return o+=t.toString(),o},n.encode=function(e){var t=this.encodeBitString(e);return this.bitStringToString(t)},n.decode=function(e){var t=this;if(!e)return"";var o="",a=this.stringToBitString(e),s=this.root;return a.split("").forEach(function(h){var g=h==="0"?"left":"right";s=s[g],s.isLeaf()&&(o+=s.value,s=t.root)}),o},n.encodeBitString=function(e){var t=this;return e.split("").map(function(o){return t.bitValue(o)}).join("")},n.bitValue=function(e){return this.leafCache[e]||this.generateLeafCache(),this.leafCache[e]},n.generateLeafCache=function(e,t){e===void 0&&(e=this.root),t===void 0&&(t=""),e.isLeaf()?this.leafCache[e.value]=t:(this.generateLeafCache(e.left,t+"0"),this.generateLeafCache(e.right,t+"1"))},n.encodeTree=function(){return this.root.encode()},r.decodeTree=function(e){return new r(r.parseNode(e))},r.parseNode=function(e){var t=new c;return Array.isArray(e)?(t.left=r.parseNode(e[0]),t.right=r.parseNode(e[1])):t.value=e,t},r}(),w=function(){function r(i){this.rawString=i}var n=r.prototype;return n.build=function(){var e=this.buildFrequencyTable(),t=this.combineTable(e),o=this.compressCombinedTable(t);return l.decodeTree(o)},n.frequencySorter=function(e,t){return e[1]-t[1]},n.combineTable=function(e){for(;e.length>1;){var t=e.shift(),o=e.shift();e.unshift([[t,o],t[1]+o[1]]),e.sort(this.frequencySorter)}return e[0]},n.buildFrequencyTable=function(){var e={};return this.rawString.split("").forEach(function(t){e[t]=e[t]?e[t]+1:1}),Object.entries(e).sort(this.frequencySorter)},n.compressCombinedTable=function(e){var t=e[0];return Array.isArray(t)?[this.compressCombinedTable(t[0]),this.compressCombinedTable(t[1])]:t},r}(),B=function(){function r(){}return r.treeFromText=function(i){var e=new w(i);return e.build()},r.decodeTree=function(i){return l.decodeTree(i)},r}();const D=m({setup(){let r=v({rawString:"abcaa",encodedBit:"",encodedCharString:"",treeEncoded:""});function n(){let i=r.rawString,e=B.treeFromText(i);r.encodedBit=e.encodeBitString(i),r.encodedCharString=e.encode(i),r.treeEncoded=JSON.stringify(e.encodeTree())}return n(),{huffmanData:r,onRawDataChange:n}}}),N={class:"huffman"},E=u("h1",null,[d("Demo of "),u("a",{href:"https://github.com/wizardpisces/huffman-ts",target:"__blank"},"huffman-ts")],-1);function L(r,n,i,e,t,o){return T(),b("div",N,[E,u("ul",null,[u("li",null,[d("Raw data: "),S(u("input",{type:"text",onInput:n[0]||(n[0]=(...a)=>r.onRawDataChange&&r.onRawDataChange(...a)),"onUpdate:modelValue":n[1]||(n[1]=a=>r.huffmanData.rawString=a)},null,544),[[C,r.huffmanData.rawString]])]),u("li",null,'Encoded bit string: "'+f(r.huffmanData.encodedBit)+'"',1),u("li",null,'Encoded char string: "'+f(r.huffmanData.encodedCharString)+'"',1),u("li",null,'Encoded huffman tree: "'+f(r.huffmanData.treeEncoded)+'"',1)])])}const q=p(D,[["render",L]]);export{q as default};
